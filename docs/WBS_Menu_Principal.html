<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WBS Menu Principal - TM01 Troncal Magdalena</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .main-content {
            padding: 40px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #667eea;
        }
        
        .card h3 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card p {
            color: #6c757d;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .card .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        
        .card .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        
        .interactive-wbs {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .interactive-wbs h3,
        .interactive-wbs p {
            color: white;
        }
        
        .interactive-wbs .btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
        }
        
        .interactive-wbs .btn:hover {
            background: white;
            color: #28a745;
        }
        
        .layout-maestro {
            background: linear-gradient(135deg, #fd7e14 0%, #ffc107 100%);
            color: white;
        }
        
        .layout-maestro h3,
        .layout-maestro p {
            color: white;
        }
        
        .layout-maestro .btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
        }
        
        .layout-maestro .btn:hover {
            background: white;
            color: #fd7e14;
        }
        
        .other-views {
            margin-top: 40px;
        }
        
        .other-views h3 {
            color: #1e3c72;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .view-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .view-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .view-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #667eea;
        }
        
        .view-card h4 {
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .view-card p {
            color: #6c757d;
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .view-card .btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        
        .view-card .btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #6c757d;
            border-top: 1px solid #e9ecef;
        }
        
        .back-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 20px;
            text-decoration: none;
            display: inline-block;
        }
        
        .back-button:hover {
            background: #5a6fd8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ WBS MENU PRINCIPAL v4.0</h1>
            <p>Proyecto TM01 Troncal Magdalena - Sistema de Validaci√≥n ITS</p>
            <div class="stats-bar" id="statsBar">
                <div class="stat-item" id="statDocs">- üìÑ Documentos</div>
                <div class="stat-item">7 üéØ Interfaces</div>
                <div class="stat-item" id="statEquipos">- ‚öôÔ∏è Equipos</div>
                <div class="stat-item" id="statBudget">$- üí∞ Presupuesto</div>
            </div>
        </div>
        
        <div class="main-content">
            <!-- WBS INTERACTIVA -->
            <div class="card interactive-wbs">
                <h3>üöÄ WBS INTERACTIVA COMPLETA</h3>
                <p>‚úÖ Analiza TODO: Criterios + Impactos + Riesgos + Archivos + Alternativas</p>
                <p>‚úÖ Proponer cambios t√©cnicos | ‚úÖ Ver riesgos en tiempo real | ‚úÖ Sistema bidireccional</p>
                <div style="display: flex; gap: 10px;">
                    <a href="wbs.html" class="btn">üöÄ ABRIR WBS INTERACTIVA</a>
                    <button class="btn" onclick="sincronizarDatos()" style="background: #ffc107; cursor: pointer;">üîÑ Sincronizar</button>
                    <a href="estado_sync.html" class="btn" style="background: #28a745;">üìä Estado Sync</a>
                </div>
            </div>
            
            <!-- MODIFICADOR DIN√ÅMICO -->
            <div class="card modificador-dinamico">
                <h3>üîÑ MODIFICADOR DIN√ÅMICO WBS</h3>
                <p>‚úÖ Sistema de cambios en tiempo real con propagaci√≥n autom√°tica a todos los documentos del proyecto</p>
                <p>‚úÖ Modificaci√≥n de cantidades y valores | ‚úÖ C√°lculo autom√°tico de impactos | ‚úÖ Generaci√≥n autom√°tica de DTs</p>
                <p>‚úÖ Propagaci√≥n a WBS, Presupuesto, Layout | ‚úÖ Validaciones t√©cnicas y contractuales</p>
                <a href="Modificador_Dinamico_WBS.html" class="btn">üîÑ ABRIR MODIFICADOR DIN√ÅMICO</a>
            </div>
            
            <!-- OTRAS VISTAS -->
            <div class="other-views">
                <h3>üìö Otras Vistas Disponibles:</h3>
                <div class="view-grid">
                    <div class="view-card">
                        <h4>üìã REPORTE GERENCIAL</h4>
                        <p>An√°lisis ejecutivo de alto nivel con justificaci√≥n de cantidades, supuestos t√©cnicos y riesgos principales del proyecto.</p>
                        <a href="REPORTES_VALIDACION_TM01_Troncal_Magdalena.html" class="btn">Abrir Reporte Gerencial</a>
                    </div>
                    
                    <div class="view-card">
                        <h4>üí∞ DETALLE PRESUPUESTAL</h4>
                        <p>WBS presupuestal completo con c√°lculos detallados, exportaci√≥n a Excel y an√°lisis financiero automatizado.</p>
                        <a href="WBS_Presupuesto_TM01_Troncal_Magdalena.html" class="btn">Abrir WBS Presupuestal</a>
                    </div>
                    
                    <div class="view-card">
                        <h4>üèóÔ∏è EDT DETALLADO</h4>
                        <p>Estructura de Desglose de Trabajo (EDT) completa con descomposici√≥n jer√°rquica de actividades y entregables.</p>
                        <a href="EDT_DETALLADO.html" class="btn">Abrir EDT Detallado</a>
                    </div>
                    
                    <div class="view-card">
                        <h4>üìÖ CRONOGRAMA DE TRABAJO</h4>
                        <p>Propuesta de cronograma maestro con fases de ejecuci√≥n, hitos cr√≠ticos y plan de recursos del proyecto.</p>
                        <a href="CRONOGRAMA_TRABAJO.html" class="btn">Abrir Cronograma</a>
                    </div>
                    
                    <div class="view-card">
                        <h4>‚ö†Ô∏è AN√ÅLISIS DE RIESGOS</h4>
                        <p>Evaluaci√≥n integral de riesgos del proyecto con an√°lisis de impacto, probabilidad y estrategias de mitigaci√≥n.</p>
                        <a href="ANALISIS_RIESGOS.html" class="btn">Abrir An√°lisis de Riesgos</a>
                    </div>
                    
                    <div class="view-card">
                        <h4>üìä COMPARACI√ìN COSTOS BASE vs ACTUAL</h4>
                        <p>An√°lisis comparativo entre l√≠nea base de costos y valores actuales del proyecto con desviaciones por sistema.</p>
                        <a href="WBS_Comparacion_Costos_Base_vs_Actual.html" class="btn">Abrir Comparaci√≥n de Costos</a>
                    </div>
                    
                    <div class="view-card">
                        <h4>üì§ SERVIR DOCUMENTOS</h4>
                        <p>Consolida la COCINA (I-VI) y sirve documentos finales para cliente. Genera Word/HTML con todas las DTs aplicadas.</p>
                        <a href="SERVIR_DOCUMENTOS.html" class="btn">üçΩÔ∏è SERVIR DOCUMENTOS</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <a href="../index.html" class="back-button">üö™ Cerrar Sesi√≥n</a>
        </div>
    </div>
    <script src="data/tm01_master_data.js"></script>
    <script>
        try {
            const tm01Data = new TM01MasterData();
            const docsAprox = 85; // aproximado por ahora
            const equipos = tm01Data.data.layout?.length || 0;
            const totalUSD = (tm01Data.data.presupuesto||[]).reduce((s,i)=>s+(parseFloat(i.total)||0),0);
            document.getElementById('statDocs').textContent = `${docsAprox} üìÑ Documentos`;
            document.getElementById('statEquipos').textContent = `${equipos} ‚öôÔ∏è Equipos`;
            document.getElementById('statBudget').textContent = `$${(totalUSD/1_000_000).toFixed(2)}M üí∞ Presupuesto`;
        } catch(e){}
        
        function sincronizarDatos() {
            alert('üîÑ Sincronizando datos...\n\nEjecuta manualmente:\npowershell -ExecutionPolicy Bypass -File "scripts/sincronizar_SISTEMA_TM01_COMPLETO.ps1" -Force\n\nLuego refresca la p√°gina (Ctrl+Shift+R).');
        }
    </script>
</body>
</html>
